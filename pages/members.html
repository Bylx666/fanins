<canvas id="members-starsbg"></canvas>
<div id="members-list">
  <div>
    <img src="/asset/members/yihan.jpg" alt="忆晗头像云瑾厨！"/>
    <h2>忆晗</h2>
    <p>
      万恶的欧皇<br/>
      qq: 783188671
    </p>
    <span onclick="Bgm.play('/asset/members/musics/lemon.', 'mp3', 'jpg', 'lrc')">
      lemon-米津玄师
    </span>
  </div>
  <div>
    <img src="/asset/members/subkey.jpg" alt="subkey头像萝莎莉娅阿琳女仆装233">
    <h2>Subkey</h2>
    <p>
      本网站创作者兼自己都不觉得可爱的喜欢卖萌的憨批。我是幻想与启发的舰团长哒！<br/>
      qq: 2822448396
    </p>
    <span onclick="Bgm.play('/asset/members/musics/chittychitty.', 'mp3', 'jpg', 'lrc')">
      チキチキバンバン-QUEENDOM
    </span>
  </div>
  <div>
    <img src="/asset/members/houdezaiwu.png" alt="厚德载物头像识律看天">
    <h2>厚德载物</h2>
    <p>
      想一起交流的加个好友，女孩子优先<br/>
      qq号: 1540546240
    </p>
    <span onclick="Bgm.play('/asset/members/musics/tansir.', 'mp3', 'jpg', 'lrc')">
      谭sir-亚久津
    </span>
  </div>
  <div>
    <img src="/asset/members/akong.jpg" alt="阿空拜托符华祝你考满分！">
    <h2>阿空</h2>
    <p>
      想脱非入欧..<br/>
      qq: 2927924268
    </p>
    <span onclick="Bgm.play('/asset/members/musics/kamisamahajimashita.', 'mp3', 'jpg', 'lrc');"
    >
      神様はじめました-ハナエ
    </span>
  </div>
  <div>
    <img src="/asset/members/xuyi.jpg" alt="虚意的天空下，万叶在放鸽子">
    <h2>虚意</h2>
    <p>
      摆 烂 人，欢迎崩三原神方舟同好加<br/>
      qq：3480342637
    </p>
    <span onclick="Bgm.play('/asset/members/musics/moonlightSonata.', 'mp3', 'jpg', null)">
      Moonlight Sonata-TSAR
    </span>
  </div>
  <div>
    <img src="/asset/members/yangguangdananhai.jpg" alt="阳光？大男孩的诚哥头像">
    <h2>阳光大男孩</h2>
    <p>
      我是原p~<br/>
      qq: 1913329728
    </p>
    <span onclick="Bgm.play('/asset/members/musics/buyaoshuohua.', 'mp3', 'jpg', 'lrc')">
      不要说话-陈奕迅
    </span>
  </div>
  <div>
    <img src="/asset/members/guhuipaimeng.jpg" alt="骨灰级派蒙！胡桃！？">
    <h2>骨灰级派蒙</h2>
    <p>
      嗨害嗨<br/>
      qq: 3381074364
    </p>
    <span onclick="Bgm.play('/asset/members/musics/sexiangshui.', 'mp3', 'jpg', 'lrc')">
      色香水-神山羊
    </span>
  </div>
  <div>
    <img src="/asset/members/oacu.jpg" alt="oacu?">
    <h2>OACU</h2>
    <p>
      在梦中幻想着完美的生活<br/>
      qq: 737503685
    </p>
    <span onclick="Bgm.play('/asset/members/musics/nenene.', 'mp3', 'jpg', 'lrc')">
      ねぇねぇねぇ。-ピノキオピー / 鏡音リン / 初音ミク
    </span>
  </div>
  <div>
    <img src="/asset/members/tianshangzhisen.jpg" alt="天上，之森！">
    <h2>天上之森</h2>
    <p>
      成分堪比元素周期表<br>
      qq: 2641725325
    </p>
    <span onclick="Bgm.play('/asset/members/musics/niji.', 'mp3', 'jpg', 'lrc')">
      虹-真空ホロウ
    </span>
  </div>
  <div>
    <img src="/asset/members/wakuwaku.jpg" alt="又是万叶放鸽子？？">
    <h2>哇酷哇酷</h2>
    <p>
      各种批发商<br>
      qq: 3508539221
    </p>
    <span onclick="Bgm.play('/asset/members/musics/yasashi.', 'mp3', 'jpg', 'lrc')">
      優しさの理由-ChouCho
    </span>
  </div>
  <p>在同一片天空下...</p>
</div>
<style>
  #members-starsbg{
    position: absolute;
    pointer-events: none;
    width: 100%;
    height: 100%;
  }
  @keyframes bg-change {
    0% {
      background-color: #000;
    }
    20% {
      background-color: #000;
    }
    25% {
      background-color: #a60;
    }
    30% {
      background-color: #5af;
    }
    40% {
      background-color: #6cf;
    }
    60% {
      background-color: #6cf;
    }
    70% {
      background-color: #38f;
    }
    75% {
      background-color: #a6c;
    }
    80% {
      background-color: #000;
    }
    100% {
      background-color: #000;
    }
  }
  main{
    background-image: none;
    animation: bg-change infinite 30s linear;
  }
  #members-list{
    margin: 50px auto 0 auto;
    max-width: 860px;
    border-radius: 10px 10px 0 0;
    box-shadow: 1px 1px 4px #000;
    background-image: linear-gradient(30deg, #8d6a, #5a0c);
    padding: 10px;
    display: flex;
    flex-direction: column;
    background-image: url(/asset/members/bg1.png);
    background-color: #555;
  }
  #members-list > div{
    box-shadow: 1px 1px 3px #000 inset;
    border-radius: 10px;
    margin: 8px;
    overflow: hidden;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
  }
  #members-list > div > img{
    margin: 20px;
    width: 120px;
    height: 120px;
    border-radius: 50%;
    box-shadow: 0 0 3px #000;
    float: left;
  }
  #members-list > div > h2{
    margin: 20px 0 0 0;
  }
  #members-list > div > p{
    margin: 5px 10px;
  }
  #members-list > div > span{
    float: right;
    background-color: #f655;
    padding: 0 5px;
    border-radius: 5px;
    cursor: pointer;
  }
  #members-list > div > span::before{
    content: '♪';
  }
  /* 最后的那句在同一片天空下 */
  #members-list > p{
    margin: 10px 0;
    color: #fff;
    text-align: center;
    text-shadow: 1px 1px 3px #000;
  }

  @media screen and (max-width: 900px) {
    #members-list{
      margin: 50px 20px 0 20px;
    }
  }
</style>
<script>
(()=> {
  //=======背景画星星和云开始=======
  var canvas = this.querySelector('#members-starsbg');
  var ctx = canvas.getContext('2d');

  // 绘制初始化
  var starCount = 800;// 星星数量
  var starSize = 2;
  var starArr = new Int16Array(starCount * 2);
  var starCurArr = new Int16Array(starArr);

  var cloudCount = 20;// 云朵数量
  var cloudShadowOffset = 24;
  var cloudWidth = 240;
  var cloudHeight = 80;
  var cloudArr = new Int16Array(cloudCount * 2);
  var cloudCurArr = new Int16Array(cloudArr);

  var begin = 0;
  var aniSpeed = 50;
  var aniPeriod = 30000;//ms
  var starAlpha = 1;
  var cloudAlpha = 1;
  var currentAnimationFrameId = 0;
  this.pageEvent.add('in', ()=>{
    begin = Date.now();
    drawFrame();
    window.onresize = ()=> requestAnimationFrame(membersStarsbgResize);
  });
  this.pageEvent.add('out', ()=>{
    cancelAnimationFrame(currentAnimationFrameId);
    window.onresize = null;
  });

  // resize事件（包括一部分初始化内容）
  function membersStarsbgResize() {
    canvas.height = canvas.clientHeight;
    canvas.width = canvas.clientWidth;
    for(let i=0; i<starArr.length; ++i) {
      starArr[i] = Math.floor(Math.random() * canvas.width);
      starArr[++i] = Math.floor(Math.random() * canvas.height);
    }
    for(let i=0; i<cloudArr.length; ++i) {
      cloudArr[i] = Math.floor(Math.random() * canvas.width);
      cloudArr[++i] = Math.floor(Math.random() * canvas.height);
    }
  }membersStarsbgResize();

  // 动画
  function drawFrame() {
    // ==控时器&控制动画位置==
    var now = Date.now();

    for(let i=0; i<starArr.length; i+=2) {
      starCurArr[i] = Math.floor((starArr[i] + (now - begin) / aniSpeed) % canvas.width);
      starCurArr[i+1] = Math.floor((starArr[i+1] + (now - begin) / aniSpeed) % canvas.height);
    }
    for(let i=0; i<cloudArr.length; i+=2) {
      cloudCurArr[i] = Math.floor(
        (cloudArr[i] + (now - begin) / aniSpeed) % (canvas.width+cloudWidth) - cloudWidth
      );
      cloudCurArr[i+1] = cloudArr[i+1];
    }
    
    var quo = ((now - begin) % aniPeriod) / aniPeriod * 10;//quotient
    if(quo>=8||quo<2) {
      starAlpha = 1;
      cloudAlpha = 0;
    }else if(quo>=2&&quo<4) {
      starAlpha = (4 - quo) / 2;
      cloudAlpha = 1 - ((4 - quo) / 2);
    }else if(quo>=4&&quo<6) {
      starAlpha = 0;
      cloudAlpha = 1;
    }else if(quo>=6&&quo<8) {
      starAlpha = 1 - ((8 - quo) / 2);
      cloudAlpha = (8 - quo) / 2;
    }

    // ==动画帧开始==
    var h = canvas.height;
    var w = canvas.width;

    ctx.clearRect(0,0,w,h);

    // 画星星
    ctx.globalAlpha = starAlpha;
    ctx.fillStyle = '#fff';
    for(let i=0; i<starArr.length; i+=2) {
      ctx.fillRect(
        starCurArr[i], 
        starCurArr[i+1], 
        starSize, 
        starSize
      );
    }

    // 画云朵
    ctx.globalAlpha = cloudAlpha;
    ctx.fillStyle = '#aaa6';
    for(let i=0; i<cloudArr.length; i+=2) {
      ctx.fillRect(
        cloudCurArr[i]+cloudShadowOffset, 
        cloudCurArr[i+1]+cloudShadowOffset, 
        cloudWidth, 
        cloudHeight
      );
    }

    ctx.fillStyle = '#fffa';
    for(let i=0; i<cloudArr.length; i+=2) {
      ctx.fillRect(
        cloudCurArr[i], 
        cloudCurArr[i+1], 
        cloudWidth, 
        cloudHeight
      );
    }

    currentAnimationFrameId = requestAnimationFrame(drawFrame);
  };
})();
</script>